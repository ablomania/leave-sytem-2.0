{% extends 'main.html' %}
{% load static %}

{% block title %}
    Profile
{% endblock %}

{% block content %}
    <div class="profile-wrapper">
        <div class="profile-view">
            <div class="profile-header">
                <div class="profile-header-title">
                    <a href="{% if user.type == 'STAFF' %}{% url 'leave_list' slug %}{% else %}{% url 'admin_dashboard' slug %}{% endif %}" class="back-link">
                        <img src="{% static 'images/back.png' %}" width="25px" height="25px" alt="back_image" class="back-image">
                    </a>
                    <h1>Profile</h1>
                </div>
                
                <div class="profile-buttons">
                    <button type="button" id="edit-button" onclick="window.scrollTo(0, 500)">Edit Profile</button>
                </div>
            </div>
            
            <div class="profile-view1">
                <div class="profile-view-personal">
                    <h4>Personal</h4>
                    <div class="view-grid" style="background-color: #eff3f5;">
                        <p>Name</p>
                        <p>{{ user.last_name }}, {{ user.first_name }} {{ user.other_names }}</p>
                        <p>Email</p>
                        <p>{{ user.email }}</p>
                        <p>Phone</p>
                        <p>{{ user.phone_number }}</p>
                        <p>Sex</p>
                        <p>{% if user.sex == 'MALE' %}Male{% elif user.sex == 'FEMALE' %}Female{% endif %}</p>
                    </div>
                </div>
                <div class="profile-view-work">
                    <h4>Work</h4>
                    <div class="view-grid" style="background-color: #cefad0;">
                        <p>Current Department</p>
                        <p>{{ user.department.department_name }}</p>
                        <p>Position</p>
                        <p>{{ user.position }}</p>
                    </div>
                </div>
                <div class="profile-view-leave">
                    <h4>Annual Leave</h4>
                    <div class="view-grid" style="background-color: #ffd0d0;">
                        <p>Days entitled</p>
                        <p>{{ leave_details.days_entitled }}</p>
                        <p>Days Eligible</p>
                        <p>{{ leave_details.days_eligible }}</p>
                        <p>Days taken</p>
                        <p>{{ leave_details.days_taken }}</p>
                        <p>Days remaining</p>
                        <p>{{ leave_details.days_remaining }}</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="profile-change">
            <h2>Edit profile</h2>
            <h5>NB: You can only change your phone number and email address. To change other details, please contact your administrator.</h5>
            <form action="" method="post">
                {% csrf_token %}
                {% if user.type == 'HOHR' or user.type == 'RECTOR' %}
                <div>
                    <label for="first_name">first name</label>
                    <input type="text" name="f_name" id="first_name">
                </div>
                <div>
                    <label for="last_name">last name</label>
                    <input type="text" name="l_name" id="last_name">
                </div>
                <div>
                    <label for="other_names">other names</label>
                    <input type="text" name="o_name" id="other_names">
                </div>
                <div>
                    <label for="position">position</label>
                    <input type="text" name="position" id="position">
                </div>
                <div>
                    <label for="sex">sex</label>
                    <select name="sex" id="sex">
                        <option value="MALE" {% if user.sex == 'MALE' %}selected{% endif %}>male</option>
                        <option value="FEMALE"{% if user.sex == 'FEMALE' %}selected{% endif %}>female</option>
                    </select>
                </div>
                {% endif %}
                <div>
                    <label for="email-id">email</label>
                    <input type="email" name="email" id="email-id" value="{{ user.email }}">
                </div>
                <div>
                    <label for="phone-id">phone</label>
                <input type="text" name="phone" id="phone-id" value="{{ user.phone_number}}">
                </div>
                <button type="submit">submit</button>
            </form>
        </div>
    </div>
{% endblock %}