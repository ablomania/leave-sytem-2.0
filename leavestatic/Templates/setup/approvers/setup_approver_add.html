{% extends 'setup.html' %}
{% load static custom_filters %}

{% block title %}
    Add Approver - GCPS Leave System
{% endblock %}


{% block setup %}
<style>
    .app_form_add{
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        background-color: #fff;
        border-radius: 10px;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        background-color: #fff;
        .app_form_header{
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            .apfh{
                height: 40px;
                display: flex;
                flex-direction: row;
                align-items: center;
                a{
                    height: 100%;
                }
                button{
                    height: 100%;
                    border: none;
                    background-color: #0077c0;
                    color: #fff;
                    width: max-content;
                }
                h2{
                    height: 100%;
                    padding-left: 10px;
                    padding-right: 5px;
                    background-color: #bdddff;
                    display: flex;
                    flex-direction: row;
                    justify-content: center;
                    align-items: center;
                }
            }
        }
        .app_form{
            width: 30%;
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding: 10px;
            h3{
                width: 100%;
                text-align: center;
            }
            .fld456{
                display: flex;
                flex-direction: column;
                padding: 5px;
                width: 100%;
                justify-content: center;
                gap: 10px;
            }
            input[type=text], input[type=email], select{
                height: 30px;
                border-radius: 5px;
                border: gray 1px solid;
                background-color: inherit;
                -webkit-backdrop-filter: blur(5px);
                backdrop-filter: blur(5px);
            }
            .bt23{
                display: flex;
                flex-direction: row;
                gap: 10px;
                
            }
            button{
                color: #fff;
                background-color: #0077c0;
                border: none;
                height: 30px;
                border-radius: 5px;
            }
            .save{
                background-color: #00a400;
            }
        }
    }
</style>

<script>
    window.addEventListener('DOMContentLoaded', function() {
        // Get the element you want to scroll to
        const targetElement = document.querySelector('.app_form_add'); 
        
        // Or, if you prefer using a class or other selector:
        // const targetElement = document.querySelector('.yourClassName'); 

        if (targetElement) {
            targetElement.scrollIntoView({
                behavior: 'smooth', // Optional: 'auto' for instant scroll, 'smooth' for animated scroll
                block: 'center',    // Aligns the element to the vertical center of the viewport
                inline: 'center'    // Aligns the element to the horizontal center of the viewport (if applicable)
            });
        } else {
            console.warn("Target element not found for scrolling.");
        }
    });
</script>

<div class="app_form_add">
    <div class="app_form_header">
        <div class="apfh">
            <a href="{% url 'setup_approvers' %}"><button type="button"><b>Back</b> &rsaquo; Approvers</button></a>
            <h2>New Approver</h2>
        </div>
        <p>Fill the form below to add a new approver to the {{group.name}} group</p>
        <img src="{% static 'images/agree.png' %}" width="400px" alt="">
    </div>
    <form id="app_form" class="app_form" action="{% url 'submit_inputs' %}" method="post">
        <input type="hidden" name="form_meta" value="add_approver" id="">
        {% csrf_token %}

        <div class="fld456">
            <label for="approver_name">Approver Name</label>
            <select name="approver_name" id="approver_name">
                <option value="None">--------</option>
                {% for approver in all_staff %}
                <option value="{{approver.id}}">{{approver.first_name}} {{approver.last_name}}</option>
                {% endfor %}
            </select>
        </div>

        <div class="fld456">
            <label for="approver_group">Group to approve</label>
            <select name="approver_group" id="approver_group">
                {% for group in groups_list.keys %}
                <option value="{{group.id}}">{{group.name}}</option>
                {% endfor %}
            </select>
        </div>

        <div class="fld456">
            <label for="approver_level">Approver Level</label>
            <select name="approver_level" id="approver_level">
                {% for level in all_levels %}
                <option value="{{level.id}}">{{level.name}}</option>
                {% endfor %}
            </select>
        </div>

        <!-- âœ… Special approver tied to Staff -->
        <div class="fld456">
            <label for="is_special">
                <input type="checkbox" name="is_special_approver" id="is_special"
                value="True">
                Special Approver Override
            </label>
            <p class="hint">Can approve requests when no higher-ranked approvers exist</p>
        </div>

        <div class="bt23">
            <button class="save" type="button" onclick="submitMyForm4('.app_form', '.app356')">Save</button>
            <button class="saaave" type="button" 
            onclick="addAnotherToForm('app_form', 'again', 'approver')"
            >Save and add another</button>
            <input type="hidden" name="again" value="false" id="again">
        </div>
    </form>
</div>
{% endblock %}