{% extends 'setup.html' %}
{% load static custom_filters %}
{% block title %}
    Edit Approver
{% endblock %}

{% block setup %}
<script>
    window.addEventListener('DOMContentLoaded', function() {
        // Get the element you want to scroll to
        const targetElement = document.querySelector('.appedit'); 
        
        // Or, if you prefer using a class or other selector:
        // const targetElement = document.querySelector('.yourClassName'); 

        if (targetElement) {
            targetElement.scrollIntoView({
                behavior: 'smooth', // Optional: 'auto' for instant scroll, 'smooth' for animated scroll
                block: 'center',    // Aligns the element to the vertical center of the viewport
                inline: 'center'    // Aligns the element to the horizontal center of the viewport (if applicable)
            });
        } else {
            console.warn("Target element not found for scrolling.");
        }
    });
</script>
<div class="appedit appedit{{staff.id}}" style="display: flex;">
    <div class="appedit_header">
        <div class="appeh">
            <a href="{% url 'setup_approvers' %}"><button type="button"><b>Back</b> &rsaquo; Approvers</button></a>
            <h2>Edit Approver</h2>
        </div>
        <p>Fill the form below to edit the approver</p>
        <img src="{% static 'images/appr23.png' %}" width="500px" alt="">
    </div>
    <div class="appedit_form">
        <form action="{% url 'submit_inputs' %}" method="post">
            <input type="hidden" value="edit_app" name="form_meta" id="">
            <input type="hidden" name="staff_id" value="{{staff.id}}" id="app_id">
            {% csrf_token %}
            <div class="fld456">
                <h3 style="text-align: left; width: 100%;">{{staff.first_name}} {{staff.other_names}} {{staff.last_name}}</h3>
            </div>
            <div class="fld456">
                <label>Groups and Levels</label>
                {% for group in all_groups %}
                {% with approver_obj=approver_objs|get_group:group %}
                <div style="margin-bottom: 8px;">
                    <input type="checkbox"
                        name="groups"
                        value="{{group.id}}"
                        id="group_{{staff.id}}_{{group.id}}"
                        {% if approver_obj %}checked{% endif %}>
                    <label for="group_{{staff.id}}_{{group.id}}">{{group.name}}</label>
                    <select name="levels">
                        <option value="">---</option>
                        {% for level in all_levels %}
                        <option value="{{level.id}}"
                            {% if approver_obj and approver_obj.level.id == level.id %}selected{% endif %}>
                            {{level.name}}
                        </option>
                        {% endfor %}
                    </select>
                </div>
                {% endwith %}
                {% endfor %}
            </div>
            <div class="fld456">
                <label for="is_special_{{staff.id}}">
                    <input type="checkbox" name="is_special_approver" id="is_special_{{staff.id}}"
                    {% if staff.is_special_approver %}checked{% endif %}>
                    Special Approver Override
                </label>
                <p class="hint">Can approve requests when no higher-ranked approvers exist</p>
            </div>
            <div class="fld456">
                <button type="submit">Save</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
